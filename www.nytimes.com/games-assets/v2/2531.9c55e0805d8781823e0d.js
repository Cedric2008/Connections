!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4513f935-e1f6-49e4-a064-d2c3a8fe552b",e._sentryDebugIdIdentifier="sentry-dbid-4513f935-e1f6-49e4-a064-d2c3a8fe552b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"8af3776a86627a2cf5c1fe045b836037564cbfb3"},(self.webpackChunk_xwords_phoenix=self.webpackChunk_xwords_phoenix||[]).push([[2531],{6390:function(e,t,n){new Date("02/27/2023 06:00:00 GMT-0400").getTime(),new Date("04/01/2023 10:00:00 GMT-0400").getTime(),new Date("03/31/2023 13:00:00 GMT-0400").getTime(),new Date("03/31/2023 06:00:00 GMT-0400").getTime(),new Date("03/30/2023 06:00:00 GMT-0400").getTime(),new Date("03/13/2023 06:00:00 GMT-0400").getTime(),new Date("02/27/2023 06:00:00 GMT-0400").getTime()},2738:function(e,t,n){n.d(t,{S:function(){return s},X:function(){return i}});var r=n(6937),o=n(5489);function a(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}const i=(0,r.LC)({reducerPath:"loadSolutionApi",baseQuery:function(){var e;let{baseUrl:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseUrl:""};return function(n){return(e=e||(r=function(e){let{url:n,method:r="get",options:a}=e;return function*(){try{const e=yield o.Be[r](t+n,a);return"errors"in e&&e.errors?{error:{status:e.status,data:e.errors,results:e.results}}:{data:e}}catch(e){return{error:e}}}()},function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,c,"next",e)}function c(e){a(i,n,o,s,c,"throw",e)}s(void 0)}))})).apply(this,arguments);var r}}({baseUrl:"".concat(o.OB.edge,"/svc/connections/v2/")}),endpoints:e=>({getSolutionByDate:e.query({query:e=>({method:"get",url:"".concat(e,".json"),options:{withStatus:!0}}),transformErrorResponse:(e,t,n)=>{const r={message:["message: ".concat(e.data),"today: ".concat(n)].join(", ")};return console.warn("Request for connections puzzle data failed with error: ".concat(r.message)),e}})})}),{useGetSolutionByDateQuery:s}=i},4127:function(e,t,n){n.d(t,{Z:function(){return ir}});var r=n(9526),o=n(3961),a=n(6359),i=n(4237),s=n(4458),c=n(4403),l=n.n(c);const d=e=>{e.stopPropagation()};var u=e=>{let{associatedSectionId:t,linkText:n="Skip to content"}=e;return r.createElement("a",{onKeyDown:d,className:l()("SkipNav-module_skipNav__MFptJ"),href:"#".concat(t)},n)},m=n(2902),p=n(6128),f=n(63),g=n(9385),b=n(7327),v=n(7256);const y="DFP_ConnectionsAdSkip_AA",h="DFP_ConnectionsAdSkip";var w=n(9002),E=function(e){return e.BLACK="#000",e.BLUE="#b0c4ef",e.BLUE_CONTRAST="#b0c4ef",e.BLUE_LINK="#2f80ed",e.GREEN="#a0c35a",e.GREEN_CONTRAST="#a0c35a",e.GREY="#e2e2e2",e.GREY_CARD="#efefe6",e.GREY_INCORRECT="#5a594ebf",e.GREY_SELECTED="#5a594e",e.GREY_DISABLED="#7f7f7f",e.GREY_BORDER="#d3d6da",e.PURPLE_LIGHT="#b4a8ff",e.PURPLE="#ba81c5",e.PURPLE_CONTRAST="#ba81c5",e.YELLOW="#f9df6d",e.YELLOW_CONTRAST="#f9df6d",e.WHITE="#fff",e.WHITE_TRANSPARENT="rgba(255, 255, 255, 0.6)",e}(E||{});const O={NAME:"light",LOADING_BAR:{BACKGROUND:E.WHITE_TRANSPARENT,COLOR:E.BLACK},WELCOME:{BACKGROUND:"$connections-periwinkle",COLOR:E.BLACK},GAME:{LEVELS:{0:{BACKGROUND:E.YELLOW,COLOR:E.BLACK},1:{BACKGROUND:E.GREEN,COLOR:E.BLACK},2:{BACKGROUND:E.BLUE,COLOR:E.BLACK},3:{BACKGROUND:E.PURPLE,COLOR:E.BLACK}},LEVEL_CONTRAST:[E.YELLOW_CONTRAST,E.GREEN_CONTRAST,E.BLUE_CONTRAST,E.PURPLE_CONTRAST],INITIAL:{BACKGROUND:E.GREY_CARD,COLOR:E.BLACK},SELECTED:{BACKGROUND:E.GREY_SELECTED,COLOR:E.WHITE},INCORRECT:{BACKGROUND:E.GREY_INCORRECT,COLOR:E.WHITE},MISTAKES:{DOT:E.GREY_SELECTED}},LINK:E.BLUE_LINK,MODALS:{TEXT:E.BLACK,BORDER:E.GREY_BORDER},TOAST:{BACKGROUND:E.BLACK,TEXT:E.WHITE},ERROR:{BACKGROUND:E.PURPLE_LIGHT,COLOR:E.BLACK},AD:{BACKGROUND:E.PURPLE_LIGHT},BUTTONS:{CTA:{BACKGROUND:E.BLACK,COLOR:E.WHITE},ACTIONS:{BACKGROUND:E.WHITE,COLOR:E.BLACK,BORDER:E.BLACK},DISABLED:{BACKGROUND:E.WHITE,COLOR:E.GREY_DISABLED,BORDER:E.GREY_DISABLED},MENU_HOVER:{BACKGROUND:E.GREY_DISABLED}}},_=r.createContext(O);function C(e){let{children:t}=e;return r.createElement(_.Provider,{value:O},t)}function S(){const e=r.useContext(_);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}var P=n(2834);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const R={transitionTo:"welcome",isActive:!0};var N=n(5489),D=n(4658),L=n(3064);const j=window.location.origin,B=j+window.location.pathname,k="".concat(j,"/subscription/games-offer?campaignId=8YUQL"),I=(0,p.f0)({redirect_uri:encodeURIComponent("".concat(k,"&EXIT_URI=").concat(B)),response_type:"cookie",client_id:"games",application:"crosswords"}),G="".concat(N.OB.account,"/auth/enter-email?").concat(I),M="https://www.nytimes.com/subscription/games";var U=n(5647),x=n(5265);const z=4,F=new Date("".concat("2023-06-12","T00:00:00")),H="nyt-connections-beta",W=864e5,K=(e,t)=>e.currentPosition-t.currentPosition;function Y(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date).setHours(0,0,0,0)-F.setHours(0,0,0,0);let t=Math.round(e/W);return t<0&&(t=Math.abs(t)),t}function Z(e){return"".concat(e.toLocaleString("default",{month:"long"})," ").concat(e.getDate(),", ").concat(e.getFullYear())}new Date("12/14/2023 10:00:00 GMT-0500");const V=new Date("12/29/2023 12:00:00 GMT-0500"),X="Subscribe for 50% off",q=[{copy:"Final Hours",startDate:new Date("12/28/2023 18:00:00 GMT-0500")},{copy:"Ends Today",startDate:new Date("12/28/2023 10:00:00 GMT-0500")},{copy:"Ends Tomorrow",startDate:new Date("12/27/2023 10:00:00 GMT-0500")},{copy:"Ends Soon",startDate:new Date("12/22/2023 10:00:00 GMT-0500")},{copy:"Offer Wonâ€™t Last",startDate:new Date("12/18/2023 10:00:00 GMT-0500")},{copy:"Limited Time Offer",startDate:new Date("12/14/2023 10:00:00 GMT-0500")}];var J=e=>(0,r.useContext)(s.pG)[e],Q=n(5042);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const te=[{name:"ad",Content:e=>{let{isActive:t,transitionFromAdToGame:n}=e;const o=S(),{reportExposure:a,getVariant:i}=(0,v.Z)(),s=i(h),c=i(y);return(0,r.useEffect)((()=>{s&&a(h)}),[s]),(0,r.useEffect)((()=>{c&&a(y)}),[c]),t?r.createElement(w.Z,{backgroundColor:o.AD.BACKGROUND,id:"intsl",isSpecialAdUnit:!0,position:"intsl",onClose:n,ctaCopy:"Continue to Connections",className:l()("ad-interstital","AdMoment-module_adInterstitial__lqVlA"),skipButtonClassName:l()("AdMoment-module_adInterstitialSkipButton__WWTfv"),enableCountdown:"1_Variant"===s}):null}},{name:"loading",Content:e=>{let{hasLoaded:t,today:n}=e;const o=S(),a=A(A({},R),{},{hasLoaded:t,today:n,bgColor:o.WELCOME.BACKGROUND,barBgColor:o.LOADING_BAR.BACKGROUND,barColor:o.LOADING_BAR.COLOR});return r.createElement(P.Z,a)}},{name:"welcome",Content:e=>{let{today:t,editor:n,isGameFinished:o,transitionFromWelcomeToAd:a,transitionFromWelcomeToGame:s}=e;const{getVariant:c,reportExposure:l,hasAbraLoaded:d}=(0,v.Z)(),{userType:u,updateUserType:m,hasLoaded:f}=(0,i.aF)(),{isGamesSaleActive:g}=function(){var e,t;const n=J("gamesSaleCTA"),{userType:r}=(0,i.aF)(),o=null!==(e=null==r?void 0:r.entitlement)&&void 0!==e?e:"";return{isGamesSaleActive:(0,Q.ux)(null===(t=window)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.href)&&!["sub,cr","sub"].includes(o)&&n,getUrgencyMessage:e=>{const t=(e=>{const t=e||new Date(Date.now());if(void 0===typeof window)return t;const n=new URLSearchParams(window.location.search).get("date-override");return n?new Date(n):t})(e),n=q.find((e=>{let{startDate:n}=e;return t>=n&&t<V}));return(null==n?void 0:n.copy)||""},acqMessage:X,upgradeMessage:"Upgrade and save"}}(),b=(e=>{let{entitlement:t,isGameFinished:n}=e;return!t.includes("cr")&&"undefined"!=typeof window&&(()=>{var e,t,n,r;const o=/Tablet|iPad|GT-P|SM-T|Xoom|SC-|LG-V|Nexus 7|Nexus 10|KFAPWI|KFTHWI|KFOT|KFTBWI|SGP/i.test(null===(e=navigator)||void 0===e?void 0:e.userAgent),a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(t=navigator)||void 0===t?void 0:t.userAgent);return!(null===(n=window)||void 0===n||null===(r=n.matchMedia)||void 0===r||null===(r=r.call(n,"(max-width: 640px)"))||void 0===r||!r.matches)&&a&&!o})()&&!!window.isMobileDevice&&!window.gamesAppPlatform&&!window.isHybridWebView&&!window.newsreaderAppPlatform&&!n})({isGameFinished:o,entitlement:u.entitlement}),y=c("MKT_SubCon_Connections_PLOPRO_12_23"),h=()=>{y&&l("MKT_SubCon_Connections_PLOPRO_12_23")},w=c("MAPS_wordleRegisNewsletterOptIn_0324"),E=()=>{w&&l("MAPS_wordleRegisNewsletterOptIn_0324")};function O(e){let{showOfferLoginLink:n,isGamesSaleActive:r}=e;return(e=>{let{userType:t,updateUserType:n,hasAd:r,today:o,showOfferLoginLink:a,newsLetterOptinVariant:i,handleLoginOfferExpose:s,handleNewsLetterOptinExpose:c,transitionFromWelcomeToAd:l,transitionFromWelcomeToGame:d,isGamesSaleActive:u}=e;const{isLoggedIn:m,hasXwd:f}=t,g=Y(o),b={text:"Play",dataTestId:"moment-btn-play",action:()=>{r?l():d(),(0,N.ob)({name:"connections",label:"start-game",context:g,moduleName:["b: 4-8-4"]})}},v=u?X:"Subscribe",y={text:v,color:"secondary",dataTestId:"moment-btn-subscribe",action:()=>{((e,t)=>{const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!t||!t.navigationLinks||!t.navigationLinks.subscribe)return M;const n=t.navigationLinks.subscribe;return e&&n[e]?n[e]:n.default||M}(e);window.isHybridWebView&&window.NativeBridge?window.NativeBridge.gamesAuthenticateUser("subscribe").then((e=>{if(!e.success)throw new Error(e.error);window.dispatchEvent(new CustomEvent("gamesUserCredentialChanged",{detail:e})),t&&(0,p.Af)(e.values.gamesAuthenticateUser,t)})).catch((e=>{console.error("Failed to authenticate user",e)})):(0,p.I3)(n)?(0,p.Hu)(n):window.location.assign(n)})("connections",n),(0,N.ob)({name:"connections",label:v.toLowerCase(),context:g,region:"welcome"})}};return f?[{buttons:[b]}]:m?[{buttons:[b]},{header:"Want to access all of our games?",desktopButtonOrder:"vertical",buttons:[y]}]:[{buttons:[b]},{header:"Want to access all of our games?",desktopButtonOrder:"vertical",buttons:[{text:"Log In",color:"secondary",dataTestId:"moment-btn-login",action:e=>{(0,N.ob)({name:"connections",label:"log-in",context:g,region:"welcome"}),s(),c();let t=a?function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=arguments.length>1?arguments[1]:void 0;const r=(null==t||null===(e=t.navigationLinks)||void 0===e?void 0:e.login)||"";return(0,p.I3)(r)?r:n?(0,N.T0)(G,n):G}(window||void 0,null!=i?"&display=,".concat(i):void 0):(0,L.U)(window||void 0);a||null==i||(t=(0,L.U)(window||void 0,"&display=,".concat(i))),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;if(window.isHybridWebView&&window.NativeBridge)e.preventDefault(),(e=>{window.isHybridWebView&&window.NativeBridge&&window.NativeBridge.gamesAuthenticateUser("login").then((t=>{if(!t.success)throw new Error(t.error);window.dispatchEvent(new CustomEvent("gamesUserCredentialChanged",{detail:t})),(0,p.Af)(t.values.gamesAuthenticateUser,e)})).catch((e=>{console.error("Failed to log in user",e)}))})(t);else{const e=r||(0,L.U)(window||void 0,n);(0,p.I3)(e)?(0,p.Hu)(e):window.location.assign(e)}}(e,n,void 0,t)}},y]}]})({userType:u,updateUserType:m,hasAd:b,showOfferLoginLink:n,newsLetterOptinVariant:w,handleLoginOfferExpose:h,handleNewsLetterOptinExpose:E,today:t,transitionFromWelcomeToAd:a,transitionFromWelcomeToGame:s,isGamesSaleActive:r})}const[_,C]=(0,r.useState)({bgColor:"$connections-periwinkle",icon:"connections",title:"Connections",buttonGroups:O({showOfferLoginLink:!1,isGamesSaleActive:g}),description:{text:"Group words that share a common thread."},infoText:r.createElement("span",{className:"pz-moment__info-editor"},"By ",n),date:Z(t)}),[S,P]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{f&&((0,N.hX)("welcome-modal","connections","".concat((e=>{const{isLoggedIn:t,hasXwd:n}=e;return n?"NULL":t?"subscribe":"log-in, subscribe"})(u)),"".concat(Y(t))),C(ee(ee({},_),{},{buttonGroups:O({showOfferLoginLink:!!y&&"0_Control"!==y,isGamesSaleActive:g})})))}),[f,y,w,u.isLoggedIn]),(0,r.useEffect)((()=>{window.newsreaderAppPlatform||window.isHybridWebView||!D.tq||(P(!0),(0,N.hX)("welcome","connections","download-app","".concat(Y(t))))}),[]),r.createElement(r.Fragment,null,r.createElement(U.Z,{game:_}),S&&r.createElement(x.Z,{title:"Play Connections and more in the NYT Games app.",icon:"crossword-app",ctaLink:"https://fpx3r.app.goo.gl/app-store",showMultipleIconsBanner:!0,newTab:!0,onClickLink:()=>{(0,N.ob)({element:{name:"connections",label:"welcome-download-app"},context:"".concat(Y(t)),label:"https://fpx3r.app.goo.gl/app-store"})}}))}}],ne=(0,b.Z)(te),{Moments:re,momentSystem:oe}=ne;var ae=n(826);const ie=e=>e.overlays.modals,se=(0,ae.P1)(ie,(e=>e.name)),ce=((0,ae.P1)(se,(e=>!!e)),(0,ae.P1)(ie,(e=>e.isClosing))),le=e=>e.overlays.toasts,de=(0,ae.P1)(le,(e=>e.name)),ue=((0,ae.P1)(de,(e=>!!e)),(0,ae.P1)(le,(e=>e.isClosing)));var me=n(2786);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ge=window.localStorage;let be=null,ve={};const ye=e=>{const t=(new Date).getTime()-6048e5,n=1e3*Number.parseInt(e.toString().slice(0,10));return!n||n&&n<=t},he=()=>{var e,t;const n=null===(e=ve.savedBoard)||void 0===e?void 0:e.flat();return null===(t=ve.history)||void 0===t?void 0:t.map((e=>{const t={};return{cards:e.map((e=>{const r=null==n?void 0:n.find((t=>t.text===e));return r?(t[r.group]=!0,r.id.toString()):""})).join(","),correct:1===Object.keys(t).length||!1}}))},we=e=>{const t=[];let n=[];return e.forEach(((e,r)=>{(r+1)%4==0?(n.push(e),t.push(n),n=[]):n.push(e)})),t},Ee={highContrastEnabled:!1,playedBefore:!1,dayOfTest:Y(),groupsFound:[],savedBoard:null,attemptsRemaining:4,history:[],loading:!1,gameStarted:!1};function Oe(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&ge.removeItem(H);const e=Object.keys(localStorage);e.filter((e=>e.includes("nytsb"))).forEach((e=>{const{timestamp:t}=JSON.parse(ge.getItem(e)||"");ye(t)&&ge.removeItem(e)})),e.filter((e=>e.includes("lastPlayed"))).forEach((e=>{const t=JSON.parse(ge.getItem(e)||"");ye(t)&&ge.removeItem(e)}))}function _e(e){ve=e;try{(function(){let e=ge.getItem(H);const t=JSON.parse(e||"");return!(!e||!t.status)&&(t.status,e=JSON.stringify(t),e)})()||ge.setItem(H,JSON.stringify(e))}catch(t){try{Oe(),ge.setItem(H,JSON.stringify(e))}catch(e){0!==Object.keys(ve).length&&1!==Object.keys(ve).length||(ve=Ee),ge.removeItem(H);try{ge.setItem(H,JSON.stringify({status:"full",playedBefore:!0}))}catch(e){(0,N.lY)(new Error("Failed to set local storage status: ".concat(e)))}}}}const Ce=()=>(0===Object.keys(ve).length&&(ve=Ee),ve);function Se(e,t){ve[e]=t,_e(ve)}function Pe(){const{playedBefore:e}=Ce(),t=fe(fe({},Ee),{},{playedBefore:e,dayOfTest:Y()});localStorage.removeItem(H),_e(t)}const Te=e=>{const t=e.flatMap((e=>e.cards.map((t=>fe(fe({},t),{},{category:e.title}))))).sort(((e,t)=>e.originalPosition-t.originalPosition)).map((e=>({id:e.originalPosition,selected:e.selected,text:e.content,group:e.category,solved:!1})));return we(t)},Ae=(e,t)=>{var n;if(!t||!t.savedBoard)return{currentGameState:e,currentProgress:{guesses:[],playedBefore:!1}};const r=null===(n=t.savedBoard)||void 0===n?void 0:n.reduce(((t,n,r)=>{const o=t;return n.forEach(((t,a)=>{const i=e=>e.title===t.group,s=e.categories.find(i),c=s?s.level:0,l={content:t.text,originalPosition:t.id,level:c,selected:t.selected,currentPosition:n.length*r+a},d=o.find(i);d?d.cards.push(l):o.push({title:t.group,solved:!!t.solved&&{order:r},level:c,cards:[l]})})),o}),[]);return{currentGameState:fe(fe({},e),{},{categories:r}),currentProgress:{guesses:he()||[],playedBefore:t.playedBefore||!1}}};const Re=e=>{const t=function(){let e=Ee;try{const t=ge.getItem(H);t&&(e=JSON.parse(t))}catch(e){(0,N.lY)(new Error("Couldn't fetch saved state: ".concat(e)))}return e}(),{dayOfTest:n=0}=t;return t.status&&"full"===t.status?Pe():n&&n===Y()&&_e(t),function(e){Ee.savedBoard=Te(e.categories);const{dayOfTest:t,savedBoard:n,attemptsRemaining:r,groupsFound:o}=Ce(),a=Y()!==t,i=function(t){const{categories:n}=e,r=t.map((e=>e.map((e=>e.group)))),o={};r.forEach((e=>{e.forEach((e=>{o[e]||(o[e]=!0)}))}));const a=Object.keys(o);for(let e=0;e<a.length;e+=1){const t=a[e];if(!n.map((e=>e.title)).includes(t))return Pe(),!0}return!1}(n),s=[];if(!a&&n&&!i){if(n){be=n;let e=0;be.forEach((t=>{t.every((e=>e.solved))&&s.push(t[0].group),t.forEach((t=>{t.selected&&(e+=1)}))})),o&&o.length!==s.length&&Se("groupsFound",s)}return r&&r>=0&&Se("attemptsRemaining",r),Ae(e,ve)}return Pe(),be=[],Ae(e,ve)}(e)},Ne=e=>{var t;let{cards:n,startIndex:r=0}=e;const o={},a=(null===(t=ve.savedBoard)||void 0===t?void 0:t.flat())||[];a.forEach((e=>{o[e.id]=e}));const i=n.sort(((e,t)=>e.currentPosition-t.currentPosition)).map((e=>o[e.originalPosition])),s=12===r?a:a.slice(0,r),c=[...new Set(i)];0===s.length&&c.length<=1||Se("savedBoard",we([...s,...i]))},De=e=>{let{category:t,cards:n,solvedCategoryCount:r,autoSolved:o}=e;if(t){var a;Ne({cards:n,startIndex:4*r});const e=t.cards.map((e=>e.content)),i=null===(a=ve.savedBoard)||void 0===a?void 0:a.map((e=>e.map((e=>e.group===t.title?fe(fe({},e),{},{selected:!1,solved:!0}):e))));if(void 0===i||i===[])return;Se("savedBoard",i),Se("groupsFound",[...ve.groupsFound,t.title]),o||Se("history",[...ve.history,e])}},Le=e=>{const t=e.map((e=>e.content)),n=ve.attemptsRemaining?ve.attemptsRemaining-1:void 0;ve.history&&Se("history",[...ve.history,t]),Se("attemptsRemaining",n)},je=e=>{Se("playedBefore",e)};var Be=n(7593),ke=n(4419);const Ie=1e3;let Ge=function(e){return e.CONGRATS="congrats",e.HOW_TO_PLAY="howToPlay",e.SETTINGS="settings",e}({}),Me=function(e){return e.ALREADY_GUESSED="alreadyGuessed",e.ONE_AWAY="oneAway",e.REVEAL_MISTAKE_TITLE="revealMistakeTitle",e.COPY_RESULTS="onCopy",e.SHARE_FAIL="onFail",e}({});var Ue=n(3234);const xe={0:"Perfect",1:"Great",2:"Solid",3:"Phew",4:"Next Time"};let ze=function(e){return e.CATEGORY="category",e.CARD="card",e}({}),Fe=function(e){return e.CARD_SHAKE="cardShake",e.CARD_BOUNCE="cardBounce",e.CARD_SHUFFLE="cardShuffle",e}({}),He=function(e){return e.CATEGORY_PULSE="categoryPulse",e}({});let We=function(e){return e.X_SMALL="xSmall",e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e.X_LARGE="xLarge",e}({});const Ke=["children","disabled","isFilled","isFilledWhileDisabled","isSubmit","size"];function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(this,arguments)}function Ze(e){switch(e){case We.X_SMALL:return"ActionButton-module_xSmall__WP4hl";case We.SMALL:return"ActionButton-module_small___YtWp";case We.MEDIUM:return"ActionButton-module_medium__Zwxfw";case We.LARGE:return"ActionButton-module_large__UR6Br";case We.X_LARGE:return"ActionButton-module_xLarge__zj7ZN";default:return""}}var Ve=e=>{const{children:t,disabled:n,isFilled:o,isFilledWhileDisabled:a,isSubmit:i,size:s}=e,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ke),l=S();let d={backgroundColor:l.BUTTONS.ACTIONS.BACKGROUND,color:l.BUTTONS.ACTIONS.COLOR,borderColor:l.BUTTONS.ACTIONS.BORDER};return n&&(d={backgroundColor:l.BUTTONS.DISABLED.BACKGROUND,color:l.BUTTONS.DISABLED.COLOR,borderColor:l.BUTTONS.DISABLED.BORDER}),(o&&!n||a&&n)&&(d={backgroundColor:l.BUTTONS.CTA.BACKGROUND,color:l.BUTTONS.CTA.COLOR,borderColor:void 0,border:"none"}),r.createElement("button",Ye({disabled:n,type:i?"submit":"button",style:d},c,{className:"".concat("ActionButton-module_button__IlhXt"," ").concat(s&&Ze(s)||"")}),t)};const Xe=e=>e.animation,qe=(0,ae.P1)(Xe,(e=>e.isAnimating)),Je=(0,ae.P1)(Xe,(e=>e.component===ze.CATEGORY&&e.effect===He.CATEGORY_PULSE?e.level:-1));(0,ae.P1)(Xe,(e=>e.component));var Qe=n(9406),$e=n(448);const et=(e,t)=>e.solved&&t.solved?e.solved.order-t.solved.order:-1,tt=(e,t)=>e.level-t.level;function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ot=(e,t)=>{const n=new Map;return t.forEach((e=>{e.cards.forEach((e=>{n.set(e.originalPosition.toString(),e.level)}))})),e.map((e=>e.cards.split(",").map((e=>n.get(e)))))},at=(e,t,n,r,o)=>{if(t.length===r)return t.map((e=>rt(rt({},e),{},{selected:!o})));const a=e.filter((e=>e.currentPosition>=r)),i=t.reduce(((e,t)=>{if(t.level===n)return e;if(t.currentPosition<r){const n=a.pop();void 0!==n&&e.push(rt(rt({},t),{},{currentPosition:n.currentPosition}))}else e.push(rt({},t));return e}),[]);return e.map(((e,t)=>rt(rt({},e),{},{selected:!o,currentPosition:t}))).concat(i)},it=(e,t)=>e.length===t?[]:e.reduce(((e,n)=>(n.currentPosition-t>=0&&e.push(rt(rt({},n),{},{currentPosition:n.currentPosition-t})),e)),[]),st=e=>{let{correct:t,cards:n}=e;return{correct:t,cards:n.map((e=>e.originalPosition)).sort(((e,t)=>e-t)).join(",")}},ct=e=>e.map((e=>rt(rt({},e),{},{selected:!1}))),lt=(e,t)=>{const n=e.map((e=>e.level));let r=0;for(;n.includes(r)&&r<t;)r+=1;return r};function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){let{categories:t,isDisabled:n}=e;const r=t.filter((e=>e.solved));return n||r.length===t.length}function pt(e){let{cards:t,isDisabled:n}=e;return n||t.filter((e=>e.selected)).length<=0}var ft=e=>{let{cardsPerCategory:t,board:n,isDisabled:o,isRecentIncorrect:i,onSubmit:s,today:c,updateBoard:l}=e;const d=(0,a.I0)(),u=(0,a.v9)(qe),m=function(e){let{cards:t,cardsPerCategory:n,guesses:r,isRecentIncorrect:o}=e;const a=t.filter((e=>e.selected)).length===n,i=r.filter((e=>!e.correct)).length<4;return!(!o&&a&&i)}({cards:n.cards,cardsPerCategory:t,guesses:n.guesses,isRecentIncorrect:i});return r.createElement(r.Fragment,null,r.createElement(Ve,{form:"default-choices","data-testid":"shuffle-btn",disabled:mt({categories:n.categories,isDisabled:o}),onClick:()=>{d((0,Qe.XF)({component:ze.CARD,effect:Fe.CARD_SHUFFLE,animationTimeout:250})),function(e,t,n){(0,N.ob)({name:"connections",label:"shuffle",context:Y(n),moduleName:["b: 4-8-4"]});const r=16-e.cards.length,o=(e=>{const t=(0,$e.Z)(Array.from(Array(e.length).keys()));return e.map(((e,n)=>ut(ut({},e),{},{currentPosition:t[n]})))})(e.cards);Ne({cards:o,startIndex:r}),t({categories:e.categories,guesses:e.guesses,cards:o})}(n,l,c)}},"Shuffle"),r.createElement(Ve,{form:"default-choices","data-testid":"deselect-btn",size:We.MEDIUM,disabled:pt({cards:n.cards,isDisabled:o}),onClick:()=>{!function(e,t,n){(0,N.ob)({name:"connections",label:"deselect",context:Y(n),moduleName:["b: 4-8-4"]}),(()=>{const{savedBoard:e}=ve;e&&Se("savedBoard",e.map((e=>e.map((e=>fe(fe({},e),{},{selected:!1}))))))})(),t({categories:e.categories,guesses:e.guesses,cards:ct(e.cards)})}(n,l,c)}},"Deselect all"),r.createElement(Ve,{isSubmit:!0,form:"default-choices","data-testid":"submit-btn",size:We.X_SMALL,disabled:m||o,isFilled:!0,isFilledWhileDisabled:u&&!m,onClick:e=>{e.preventDefault(),s()}},"Submit"))},gt=n(8661),bt="Card-module_bounce4__bqZEe",vt="Card-module_bounce3__dq6CF",yt="Card-module_bounce2__oOMZc",ht="Card-module_bounce1__joCfe",wt="Card-module_mistakeShake__bGlnV",Et="Card-module_shuffle__PBryY",Ot="Card-module_shuffleSelected__GBb0I",_t="Card-module_label__U_Q2H",Ct="Card-module_disabled__lEDp4",St="Card-module_shrinkCard__PC3_N",Pt="Card-module_labelXSm__re9XU",Tt="Card-module_labelSm___0Du7",At="Card-module_labelMd__M_fr5",Rt="Card-module_labelLg__B4X4l",Nt="Card-module_labelXLg__marsN",Dt="Card-module_labelXXLg__awzvt",Lt="Card-module_labelXXXLg__LzdWa";const jt=e=>e?e.effect===Fe.CARD_SHAKE?" ".concat(wt):e.effect===Fe.CARD_BOUNCE?" ".concat(function(e){switch(e){case 1:return ht;case 2:return yt;case 3:return vt;default:return bt}}(e.timeout)):e.effect===Fe.CARD_SHUFFLE?e.selected?" ".concat(Ot):" ".concat(Et):"":"",Bt=["content","originalPosition","disabled","selected","level","toggleCard","currentPosition","selectedIndex"];function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kt.apply(this,arguments)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mt=(0,r.memo)((e=>{let{content:t,originalPosition:n,disabled:o,selected:i,level:s,toggleCard:c,currentPosition:l,selectedIndex:d}=e,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Bt);const m=S(),[p,f]=(0,r.useState)(i),[g,b]=(0,r.useState)(!1),v=(0,a.v9)((e=>{let{selected:t,selectedIndex:n}=e;return(0,ae.P1)(Xe,(e=>t&&e.effect===Fe.CARD_SHAKE?{effect:Fe.CARD_SHAKE}:t&&e.effect===Fe.CARD_BOUNCE?{effect:Fe.CARD_BOUNCE,timeout:n}:e.effect===Fe.CARD_SHUFFLE?{effect:Fe.CARD_SHUFFLE,selected:t}:void 0))})({selected:i,selectedIndex:d})),{winWidth:y}=(0,gt.Z)(),h=p?m.GAME.SELECTED:m.GAME.INITIAL,w=function(e){let{winWidth:t,content:n}=e;return/\p{Extended_Pictographic}/u.test(n)?Lt:t>639?Dt:function(e,t){const n=e.split(" ").sort(((e,t)=>t.length-e.length))[0];if(t>300)switch(n.length){case 1:case 2:case 3:case 4:case 5:case 6:case 7:return Nt;case 8:return Rt;case 9:return At;case 10:case 11:return Tt;default:return Pt}else switch(n.length){case 1:case 2:case 3:case 4:case 5:return Nt;case 6:return Rt;case 7:return At;case 8:return Tt;default:return Pt}}(n,t)}({winWidth:y,content:t}),E=((e,t,n)=>({backgroundColor:(null==e?void 0:e.effect)===Fe.CARD_SHAKE?t.GAME.INCORRECT.BACKGROUND:n.BACKGROUND,color:(null==e?void 0:e.effect)===Fe.CARD_SHAKE?t.GAME.INCORRECT.COLOR:n.COLOR}))(v,m,h),O=(0,r.useCallback)((()=>{f(!p),(e=>{let{cardContent:t,selected:n}=e;const{savedBoard:r}=ve;r&&Se("savedBoard",r.map((e=>e.map((e=>(e.text===t&&(e.selected=n),e))))))})({cardContent:t,selected:!p}),c(n)}),[p]);return(0,r.useEffect)((()=>{f(i)}),[i]),r.createElement("label",kt({htmlFor:"inner-card-".concat(n),className:"".concat(_t," ").concat(w).concat(g?" ".concat(St):"").concat(jt(v)).concat(o?" ".concat(Ct):""),style:Gt(Gt({},E),{},{zIndex:p?"1":"0"}),key:"inner-card-".concat(n),onPointerDown:()=>{o||(b(!0),O())},onPointerUp:()=>{o||b(!1)},onPointerCancel:()=>{b(!1)},onPointerLeave:()=>{b(!1)},"data-testid":"card-label"},u),r.createElement("input",{className:"visually-hidden",type:"checkbox",id:"inner-card-".concat(n),name:"inner-card-".concat(n),value:t,defaultChecked:p,disabled:o,"data-testid":"card-input",onKeyDown:e=>{o||" "!==e.key||O()}}),t)}));const Ut=(e,t)=>{let{animation:n}=e,{animation:r}=t;return!(n&&n.effect===Fe.CARD_SHUFFLE||r&&r.effect===Fe.CARD_SHUFFLE)};function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}function zt(e,t){switch(e/t){case 3:return"Cards-module_cardsContainer3__xoWJT";case 2:return"Cards-module_cardsContainer2__V9ZMo";case 1:return"Cards-module_cardsContainer1__uoVPZ";default:return"Cards-module_cardsContainer4__sK7TL"}}var Ft=e=>{let{cards:t,toggleCard:n,disabled:o,cardsPerCategory:a}=e;const i=t.filter((e=>e.selected)).length>=a;let s=0;return r.createElement("div",{className:"".concat("Cards-module_cardsContainer__O3T5q"," ").concat(zt(t.length,a))},t.sort(K).map((e=>(e.selected&&(s+=1),r.createElement(Be.$3,{key:"".concat(e.content,"-flip"),flipId:e.content,shouldFlip:Ut},r.createElement(Mt,xt({},e,{disabled:o||i&&!e.selected,key:"card-position-".concat(e.originalPosition),selectedIndex:s,toggleCard:n})))))))};const Ht=e=>e.game,Wt=(0,ae.P1)(Ht,(e=>e.attemptsMade)),Kt=(0,ae.P1)(Ht,(e=>e.puzzle));var Yt="Mistakes-module_bubble__nDlOh",Zt=(0,r.memo)((e=>{let{isMistakeIndicatorDisabled:t=!1,puzzleSolved:n}=e;const o=S(),i=(0,a.v9)(Wt),[s,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(n),m=4-i,p=Array(m).fill(void 0);n&&!d&&setTimeout((()=>{u(!0)}),2400),!n&&d&&u(!1);const f=s===i;(0,r.useEffect)((()=>{i&&c(i)}),[i]);const g=J("connectionsAttempts")?"attempts":"mistakes",b=g.charAt(0).toUpperCase()+g.slice(1);return d?null:r.createElement("section",null,r.createElement("span",{className:l()("Mistakes-module_mistakesWrapper__LGl68",n?"Mistakes-module_hideMistakes__C3kxl":"Mistakes-module_showMistakes__q6EWj")},r.createElement("span",{className:"visually-hidden","aria-atomic":"true","aria-live":"assertive","data-testid":"mistake-count"},m," ",g," remaining out of"," ",4),r.createElement("p",{className:"Mistakes-module_mistakesContent__nlijY",style:{color:t?o.GAME.INCORRECT.BACKGROUND:o.GAME.INITIAL.COLOR},"aria-hidden":"true","data-testid":"mistake-text"},b," remaining:",r.createElement("span",{className:"Mistakes-module_attemptsRemainingBubbles__VF4n3"},p&&p.map(((e,n)=>r.createElement("span",{style:{backgroundColor:t?o.GAME.INCORRECT.BACKGROUND:o.GAME.SELECTED.BACKGROUND},key:"bubble-".concat(n),className:Yt,"data-testid":"mistake-bubble"}))),f&&r.createElement("span",{style:{backgroundColor:t?o.GAME.INCORRECT.BACKGROUND:o.GAME.SELECTED.BACKGROUND},className:l()(Yt,"Mistakes-module_bubbleMistakeAnimation__zICdm")})))))})),Vt=n(6697),Xt=n(9861),qt={timer:"CountdownTimer-module_timer__vKdFl",timerBold:"CountdownTimer-module_timerBold__eISHm"};const Jt=36e5,Qt=e=>e.toString().padStart(2,"0");var $t=e=>{let{renderId:t=!0,bold:n=!1}=e;const[o,a]=(0,r.useState)("");return(0,r.useEffect)((()=>{const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const t=e.getTime(),n=()=>a((e=>{const t=(new Date).getTime(),n=Math.floor(e-t);if(n<=0)return"00:00:00";const r=Math.floor(n%864e5/Jt),o=Math.floor(n%Jt/6e4),a=Math.floor(n%6e4/1e3);return"".concat(Qt(r),":").concat(Qt(o),":").concat(Qt(a))})(t)),r=setInterval(n,200);return n(),()=>clearInterval(r)}),[]),r.createElement("div",{role:"timer"},r.createElement("div",{className:l()(qt.statistic,qt.timer,n?qt.timerBold:void 0)},r.createElement("div",{id:t?"timer":void 0,"data-testid":"timer",className:qt.testTimer},o)))},en=n(8494),tn=n(3628),nn=n(4796);function rn(e,t,n,r){var o,a;(0,nn.Og)()?(o=null==e?void 0:e.text,null===(a=window.NativeBridge)||void 0===a||a.share(o,"","")):"android"===window.newsreaderAppPlatform?((e,t,n,r)=>{try{const n=r.target,o=document.createElement("textarea");o.style.position="absolute",o.style.left="-1000px",o.style.top="-1000px",o.value=e.text,n.parentElement.appendChild(o),o.select(),document.execCommand("copy"),n.parentElement.removeChild(o),t()}catch(e){n(),console.warn("Share failed",e)}})(e,t,n,r):function(e,t,n){(0,D.K1)()&&!(navigator.userAgent.toLowerCase().indexOf("firefox")>-1)&&void 0!==navigator.share&&navigator.canShare&&navigator.canShare(e)?navigator.share(e).catch((()=>{})):tn.nx(e.text).then(t,n).catch((e=>{n(),console.warn("Share failed",e)}))}(e,t,n)}var on={modalTitle:"Congrats-module_modalTitle__esqOb",modalDescription:"Congrats-module_modalDescription__l6Bxj",modalContent:"Congrats-module_modalContent__yncTN",shareBlocksContainer:"Congrats-module_shareBlocksContainer__Ytw6Q",shareRow:"Congrats-module_shareRow__eP6Za",shareBlock:"Congrats-module_shareBlock__QPe6T",modalFeedback:"Congrats-module_modalFeedback__MSjQW",timerLabel:"Congrats-module_timerLabel__wSw1V",buttonsContainer:"Congrats-module_buttonsContainer__y_PDc",button:"Congrats-module_button__bwzUO",buttonLink:"Congrats-module_buttonLink__NUPz9",playSpellingBee:"Congrats-module_playSpellingBee__GZLSB"};const an={0:"ðŸŸ¨",1:"ðŸŸ©",2:"ðŸŸ¦",3:"ðŸŸª"},sn=e=>{let{guesses:t,cardsPerCategory:n}=e;const o=S(),a=e=>{var t;return null===(t=o.GAME.LEVELS[e])||void 0===t?void 0:t.BACKGROUND};return r.createElement("dl",{className:on.shareBlocksContainer,"aria-label":"".concat(n," by ").concat(t.length," grid of color block emojis representing your guesses")},t.map(((e,t)=>{const n=e.every((t=>t===e[0]))?"correct":"incorrect",o="".concat(n,". ").concat("correct"===n?"Found level ".concat(e[0]+1,"."):"Guessed items from levels ".concat(e.join(", ")));return r.createElement("div",{key:"attempt-".concat(t),className:on.shareRow},r.createElement("dd",{"aria-label":"attempt #".concat(t+1)}),r.createElement("dt",{"aria-label":o},e.map(((e,t)=>r.createElement("span",{className:on.shareBlock,style:{backgroundColor:a(e)},"aria-hidden":"true",key:"item".concat(t,"-level").concat(e)})))))})))},cn=e=>{let{guesses:t,trackingPuzzleId:n,displayPuzzleNumber:o}=e;const i=(0,a.I0)(),s=((e,t)=>{const n=t?t.map((e=>e.map((e=>an[e])).join(""))):[];return"Connections \nPuzzle #".concat(e,"\n").concat(n.join("\n"))})(o.toString(),t);return r.createElement(Vt.Z,{className:l()(on.button,on.shareResults),text:"Share Your Results",onClick:e=>{e.preventDefault(),e.stopPropagation(),(0,N.ob)({name:"connections",label:"share",context:n,moduleName:["b: 4-8-4"],region:"congrats"}),rn({text:s},(()=>{i((0,me.eS)(Me.COPY_RESULTS))}),(()=>{i((0,me.eS)(Me.SHARE_FAIL))}),e)}})},ln=e=>{let{trackingPuzzleId:t}=e;return r.createElement("a",{href:"/puzzles/spelling-bee",className:l()(on.buttonLink,on.playSpellingBee),onClick:e=>{(0,N.ob)({name:"connections",label:"next-game",context:t,moduleLabel:"spelling-bee"})}},"Play Spelling Bee",r.createElement(Xt.Z,{icon:"spelling-bee-wings",className:"pz-icon-right"}))};var dn="HowToPlay-module_modalMessage__LMRqY",un="HowToPlay-module_categoryListItem__f8ujU";const mn=()=>r.createElement("span",{"aria-hidden":"true",className:"HowToPlay-module_helpArrowContainer__ZOXOG"},r.createElement("span",{className:"HowToPlay-module_helpArrow__WMXx9"})),pn={0:"Straightforward",1:"Medium",2:"Difficult",3:"Tricky"},fn=()=>{const e=S(),t=t=>e.GAME.LEVELS[t].BACKGROUND;return r.createElement("ul",{className:"HowToPlay-module_categoryDifficultyKey__hgZTv"},r.createElement(mn,null),[0,1,2,3].map(((e,n)=>r.createElement("li",{key:"level-".concat(n+1),className:"HowToPlay-module_categoryKeyItem__gdsNY","aria-label":"Level ".concat(n+1,": ").concat(pn[e])},r.createElement("span",{style:{backgroundColor:t(e)},className:l()("HowToPlay-module_categoryKeyColor__JABkw"),"aria-hidden":"true"}),r.createElement("span",{"aria-hidden":"true"},0===e||3===e?pn[e]:"")))))};var gn=n(5775),bn={dialog:"Settings-module_dialog__sce5z",dialogTitle:"Settings-module_dialogTitle__WvBEr",description:"Settings-module_description__o368F",term:"Settings-module_term__OnWQt",detail:"Settings-module_detail__aw6L1"},vn=e=>{let{autoSolve:t,disabled:n,puzzleSolved:o,resetBoard:a}=e;const s=(0,i.aF)();return(!s.userType.isLoggedIn||s.shortzHasLoaded)&&s.userType.inShortzMode&&window.location.pathname.includes("/puzzles/shortz")?r.createElement("div",{className:"ShortzControls-module_shortzContainer__bD162"},r.createElement(Ve,{form:"default-choices",size:We.LARGE,disabled:n||o,onClick:t,"data-testid":"complete-button"},"Complete Puzzle"),r.createElement(Ve,{form:"default-choices",size:We.MEDIUM,disabled:n||!o,onClick:a,"data-testid":"reset-button"},"Reset Puzzle")):null};const yn=["getIsClosing","getOpenToastName","toastMap","onClose","portalId","onRemove","rankTitle"];function hn(){return hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hn.apply(this,arguments)}function wn(e){let{getIsClosing:t,getOpenToastName:n,toastMap:i,onClose:s,portalId:c,onRemove:l,rankTitle:d}=e,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,yn);const m=r.useRef(document.getElementById(c)),p=(0,a.v9)(n),f=(0,a.v9)(t),g=(0,a.I0)();if(!p)return null;const b=i[p],v=r.createElement(b,hn({close:function(){return g(s(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))},isClosing:f,onRemove:()=>g(l()),rankTitle:d},u));return m.current?(0,o.createPortal)(v,m.current):v}var En=n(5171),On=e=>{let{text:t,onRemove:n,durationVisible:o=3e3}=e;const a=S(),[i,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{s(!0)}),[]),(0,En.Z)((()=>d(!0)),o===1/0?null:o),r.createElement("div",{"data-testid":"connection-toast",className:l()("Toast-module_toast__YAoDa",{"Toast-module_fadeIn__F7BjX":i,"Toast-module_fadeOut__YGx_N":c}),style:{backgroundColor:a.TOAST.BACKGROUND,color:a.TOAST.TEXT},"aria-live":"assertive",onTransitionEnd:()=>{n&&c&&n()}},r.createElement("h2",null,t))};const _n={[Me.ALREADY_GUESSED]:e=>{let{onRemove:t}=e;return r.createElement(On,{text:"Already guessed!",onRemove:t})},[Me.ONE_AWAY]:e=>{let{onRemove:t}=e;return r.createElement(On,{text:"One away...",onRemove:t})},[Me.REVEAL_MISTAKE_TITLE]:e=>{let{onRemove:t,rankTitle:n}=e;return r.createElement(On,{text:n,onRemove:t})},[Me.COPY_RESULTS]:e=>{let{onRemove:t}=e;return r.createElement(On,{text:"Copied results to clipboard",onRemove:t})},[Me.SHARE_FAIL]:e=>{let{onRemove:t}=e;return r.createElement(On,{text:"Share failed",onRemove:t})}};var Cn=n(2466);let Sn=function(e){return e.HELP="help",e.SETTINGS="settings",e}({});const Pn=["children","icon"];function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tn.apply(this,arguments)}function An(e){switch(e){case Sn.HELP:return"ToolbarButton-module_helpIcon__UZiY1";case Sn.SETTINGS:return"ToolbarButton-module_settingsIcon__B7Cb5";default:return""}}var Rn=e=>{const{children:t,icon:n}=e,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Pn);return r.createElement("li",null,r.createElement("button",Tn({type:"button"},o,{className:"ToolbarButton-module_button__K6r2Z"}),r.createElement("i",{className:"".concat("ToolbarButton-module_icon__BBqYZ"," ").concat(An(n))}),t))};function Nn(e){let{hide:t,onButtonClick:n,today:o}=e;return r.createElement(Cn.Z,{isHidden:t},r.createElement("nav",{className:"Toolbar-module_toolbarWrapper__AlFk2"},r.createElement("ul",{className:"Toolbar-module_toolbar__TY86B"},r.createElement(Rn,{icon:Sn.SETTINGS,"aria-label":"Settings",onClick:()=>{n(Ge.SETTINGS)}}),r.createElement(Rn,{icon:Sn.HELP,onClick:()=>{(0,N.ob)({name:"connections",label:"help",context:Y(o),moduleName:["b: 4-8-4"]}),n(Ge.HOW_TO_PLAY)},"aria-label":"Help"}))))}const Dn=(e,t)=>e.content<t.content?-1:1;var Ln=(0,r.memo)((e=>{let{category:t,shouldPulse:n}=e;const{title:o,cards:a,level:i}=t,s=S(),c=s.GAME.LEVELS[i],d="light"===s.NAME?" ".concat("SolvedCategory-module_textFadeInThemeLight__bl7Jn"):"",u=a.sort(Dn);return r.createElement("section",{className:l()("SolvedCategory-module_solvedCategory___8phN",{"SolvedCategory-module_pulse__vNMz_":n}),style:{backgroundColor:c.BACKGROUND,color:c.COLOR},role:"img","aria-label":"Correct group ".concat(o,". ").concat(u.map((e=>e.content))),"data-testid":"solved-category-container"},r.createElement("h3",{className:"".concat("SolvedCategory-module_categoryTitle__UJ5pY").concat(d),"data-testid":"solved-category-title"},o),r.createElement("ol",null,u.map((e=>r.createElement("li",{key:"found-category-card-".concat(e.originalPosition),className:"".concat("SolvedCategory-module_cardListItem__YZ56v").concat(d),"data-testid":"solved-category-card"},e.content)))))})),jn=(0,r.memo)((e=>{let{categories:t,numberOfCategories:n}=e;const o=(0,a.v9)(Je);return 0===t.length?null:r.createElement("article",{"aria-live":"assertive"},r.createElement("p",{className:"visually-hidden"},t.length," Found","Categor".concat(1===t.length?"y":"ies")," out of"," ",n),r.createElement("ol",{className:"SolvedCategories-module_solvedCategoriesContainer___8Udu"},t.sort(et).map((e=>r.createElement(Ln,{category:e,key:"solved-".concat(e.level),shouldPulse:o===e.level})))))}));function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(e){Le(e)}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Un={[Ge.SETTINGS]:e=>{let{close:t,isClosing:n,onRemove:o,today:a}=e;const i=!window.isHybridWebView||(0,nn.Cb)(window.gamesAppVersion,"4.53"),s=S();return r.createElement(en.Z,{bodyClassName:l()("modal-settings-body",bn.modalWrapper),close:t,isClosing:n,onRemove:o},r.createElement("div",{className:bn.dialog},r.createElement("h2",{className:bn.dialogTitle},"SETTINGS"),r.createElement("dl",null,r.createElement("div",{className:bn.description,style:{borderColor:s.MODALS.BORDER}},r.createElement("dt",{className:bn.term},"Feedback"),r.createElement("dd",{className:bn.detail},r.createElement(gn.Z,{subject:"Connections Feedback",useEnhancedHybridDebugInfo:!0,type:N.N1.CUSTOM,tracking:()=>(0,N.ob)({name:"connections",label:"email-feedback",context:Y(a),region:"settings"})},"Email"))),i&&r.createElement("div",{className:bn.description,style:{borderColor:s.MODALS.BORDER}},r.createElement("dt",{className:bn.term},"Report a Bug"),r.createElement("dd",{className:bn.detail},r.createElement(gn.Z,{subject:"Connections Bug Report",useEnhancedHybridDebugInfo:!0,type:N.N1.CUSTOM,tracking:()=>{(0,N.ob)({name:"connections",label:"report-bug",context:Y(a),region:"settings"})}},"Email"))),r.createElement("div",{className:bn.description},r.createElement("dt",{className:bn.term},"Questions"),r.createElement("a",{href:"https://help.nytimes.com/hc/en-us/articles/360029050872-Word-Games-and-Logic-Puzzles",target:"_blank",rel:"noreferrer"},r.createElement("dd",{className:bn.detail},"FAQ"))))))},[Ge.CONGRATS]:e=>{let{close:t,isClosing:n,onRemove:o,today:a=new Date,numMistakes:i,guesses:s,cardsPerCategory:c=z}=e;const d=Y(a),u=d+1;return(0,r.useEffect)((()=>{(0,N.hX)("congrats-modal","connections","".concat(i),"".concat(d))}),[]),r.createElement(en.Z,{bodyClassName:l()("modal-rules-body","conn__modal"),close:t,isClosing:n,onRemove:o,closeLabel:"Back to puzzle"},r.createElement("div",{className:on.modalContent},r.createElement("div",null,r.createElement("h2",{"data-testid":"conn-modal__title",className:on.modalTitle},"".concat(void 0!==i&&xe[i],"!")),r.createElement("h3",{className:on.modalDescription},"Connections #".concat(u)),r.createElement(sn,{guesses:s&&s||[],cardsPerCategory:c})),r.createElement("div",null,r.createElement("p",{className:on.timerLabel},"Next puzzle in"),r.createElement($t,{renderId:!1,bold:!0})),r.createElement("div",{className:on.buttonsContainer},r.createElement(cn,{guesses:s,trackingPuzzleId:d,displayPuzzleNumber:u}),r.createElement(ln,{trackingPuzzleId:d}))))},[Ge.HOW_TO_PLAY]:e=>{let{close:t,isClosing:n,onRemove:o,today:a}=e;(0,r.useEffect)((()=>{(0,N.hX)("help","connections",null,"".concat(Y(a)))}),[]);const i=J("connectionsAttempts")?"Find the groups within ".concat(4," attempts!"):"Find the groups without making ".concat(4," mistakes!");return r.createElement(en.Z,{bodyClassName:"modal-rules-body",close:()=>{(0,N.ob)({name:"connections",label:"close",context:Y(a),moduleName:["b: 4-8-4"],region:"help"}),je(!0),t()},isClosing:n,onRemove:o},r.createElement("div",null,r.createElement("h2",{"data-testid":"conn-modal__title",className:"modal-system-header"},"How to Play"),r.createElement("p",{className:"modal-system-description"},"Find groups of four items that share something in common."),r.createElement("ul",{className:"bullet-list"},r.createElement("li",{className:"modal-system-body"},"Select four items and tap '",r.createElement("span",{className:"HowToPlay-module_bold__L0MTl"},"Submit"),"' to check if your guess is correct."),r.createElement("li",{className:"modal-system-body"},i)),r.createElement("h4",{className:"HowToPlay-module_modalHeading__Y56mA"},"Category Examples"),r.createElement("dl",{className:l()("modal-system-body","HowToPlay-module_categoryList__s4DmD")},r.createElement("span",{className:un},r.createElement("dt",null,"FISH:")," ",r.createElement("dd",null,"Bass, Flounder, Salmon, Trout")),r.createElement("span",{className:l()("modal-system-body",un)},r.createElement("dt",{"aria-label":"FIRE fill in the blank"},r.createElement("span",{"aria-hidden":"true"},"FIRE ___:"))," ",r.createElement("dd",null,"Ant, Drill, Island, Opal"))),r.createElement("p",{className:l()("modal-system-body",dn)},'Categories will always be more specific than "5-LETTER-WORDS," "NAMES" or "VERBS."'),r.createElement("p",{className:l()("modal-system-body",dn)},"Each puzzle has exactly one solution. Watch out for words that seem to belong to multiple categories!"),r.createElement("p",{className:l()("modal-system-body",dn,"HowToPlay-module_categoryDifficultyDescription__O7CQe"),"aria-label":"Each group is assigned a level, which will be revealed to you as you solve."},r.createElement("span",{"aria-hidden":"true"},"Each group is assigned a color, which will be revealed as you solve:")),r.createElement(fn,null)))}};var xn=e=>{let{categories:t,guesses:n,today:o,isReady:i,playedBefore:s}=e;const c=(0,a.I0)(),l=function(e){const t=[];return e.forEach((e=>{const n=function(e){const t=[];return e.cards.forEach((e=>{t.map((e=>e.content)).includes(e.content)||t.push(e)})),rt(rt({},e),{},{cards:t})}(e),r=t.map((e=>e.title)).indexOf(n.title);if(-1===r)t.push(n);else if(n.solved){const{solved:e}=t[r];(e&&e.order||-1)<=n.solved.order?t[r]=n:t[r].cards=n.cards}else t[r].cards=n.cards})),function(e){const t=e.filter((e=>e.solved)).sort(et).map((e=>e.title));return e.map((e=>{if(e.solved){const n=t.indexOf(e.title);e.solved={order:n}}return e}))}(t)}(t),d=l.filter((e=>!e.solved)).reduce(((e,t)=>e.concat([...t.cards])),[]).sort(K),[u,m]=(0,r.useState)({cards:d,categories:l,guesses:n}),[p,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(-1),[v,y]=(0,r.useState)(!1),h=(0,a.v9)(Xe),w=(0,a.v9)(qe),E=l[0].cards.length,O=l.length,_=u.categories.filter((e=>e.solved)),C=u.guesses.filter((e=>!e.correct)).length,S=_.length===u.categories.length,P=C>=4||S,T=xe[C],A=u.categories.filter((e=>e.solved)).length;(0,r.useEffect)((()=>{f(w)}),[w]);const R=(0,r.useCallback)((e=>{y(!1),m((t=>{const n=t.cards.map((t=>t.originalPosition===e?Mn(Mn({},t),{},{selected:!t.selected}):Mn({},t)));return Mn(Mn({},t),{},{cards:n})}))}),[]),D=(e,t,n,r)=>{const o=function(e,t){return e.categories.map((n=>n.level===t?rt(rt({},n),{},{solved:{order:e.categories.filter((e=>e.solved)).length+1}}):rt({},n)))}(u,e),a=at(t,u.cards,e,E,r),i=r?u.guesses:u.guesses.concat([Mn(Mn({},n),{},{correct:!0})]);A===O-1&&(r||c((0,me.eS)(Me.REVEAL_MISTAKE_TITLE)),setTimeout((()=>{c((0,me.h7)(Ge.CONGRATS))}),2e3)),m({categories:u.categories,cards:a,guesses:i}),c((0,Qe.XF)({component:ze.CATEGORY,effect:He.CATEGORY_PULSE,level:e,animationTimeout:1e3})),setTimeout((()=>{(e=>{let{cards:t,newCategories:n,autoSolvingNum:r,newGuesses:o,numberOfCategories:a,updateBoard:i,setAutoSolving:s,disableBoard:c,cardsPerCategory:l}=e;i({cards:it(t,l),categories:n,guesses:o}),r===a-1?s(-1):r>=0&&s(lt(n.filter((e=>e.solved)),a)),c(!1)})({newGuesses:i,autoSolvingNum:g,cards:a,cardsPerCategory:E,newCategories:o,numberOfCategories:O,updateBoard:m,disableBoard:f,setAutoSolving:b})}),500)},L=u.cards.reduce(((e,t)=>e?"".concat(e,"-").concat(t.content):t.content),"");return(0,r.useEffect)((()=>{const e=u.guesses.filter((e=>!e.correct)).length;c((0,Ue.nd)(e))}),[u.guesses]),(0,r.useEffect)((()=>{!i||s||P||c((0,me.h7)(Ge.HOW_TO_PLAY))}),[i]),(0,r.useEffect)((()=>{g>=0&&g<4&&setTimeout((()=>{const e=g,t=u.cards.filter((t=>t.level===e)),n=st({correct:!0,cards:t});D(g,t,n,!0)}),Ie)}),[g]),r.createElement(r.Fragment,null,r.createElement(wn,{portalId:"portal-toast-system",toastMap:_n,getOpenToastName:de,getIsClosing:ue,onClose:me.yg,onRemove:me.RS,rankTitle:T}),r.createElement(Nn,{hide:!i,onButtonClick:e=>{c((0,me.h7)(e))},today:o}),r.createElement(ke.Z,{modalMap:Un,portalId:"portal-modal-system",getOpenModalName:se,getIsClosing:ce,onClose:me.Mr,onRemove:me.a_,today:o,guesses:ot(u.guesses,u.categories),numMistakes:C,cardsPerCategory:E}),r.createElement("article",{className:"Board-module_board__gdu5I","data-testid":"connections-board"},r.createElement("form",{id:"default-choices",className:"Board-module_form__B5pmo"},r.createElement("h2",null,"Create four groups of four!"),r.createElement("fieldset",{className:"Board-module_boardContainer__vObNY"},!S&&r.createElement("legend",{className:"visually-hidden"},"Select four items that have something in common"),r.createElement(jn,{categories:_,numberOfCategories:O}),r.createElement(Be.U5,{flipKey:L,decisionData:{animation:h},spring:{stiffness:190,damping:25}},r.createElement(Ft,{cards:u.cards,disabled:p||g>=0,toggleCard:R,cardsPerCategory:E})))),r.createElement(Zt,{isMistakeIndicatorDisabled:P,puzzleSolved:S}),r.createElement("section",{className:"Board-module_boardActionGroup__mUDT8"},S?r.createElement(Ve,{form:"default-choices",size:We.X_LARGE,onClick:()=>{c((0,me.h7)(Ge.CONGRATS))}},"View Results"):r.createElement(ft,{board:u,cardsPerCategory:E,isDisabled:p||g>=0,isRecentIncorrect:v,onSubmit:()=>{f(!0);const e=u.cards.filter((e=>e.selected)),t=st({correct:!1,cards:e});if(((e,t)=>e.map((e=>e.cards)).includes(t.cards))(u.guesses,t))return c((0,me.eS)(Me.ALREADY_GUESSED)),void f(!1);const n=[...new Set(e.map((e=>e.level)))],r=1===n.length,a=r?1200:Ie;c((0,Qe.XF)({component:ze.CARD,effect:Fe.CARD_BOUNCE,animationTimeout:a})),function(e,t,n,r,o){const a=["r: ".concat(e?"pass":"fail"),"w: ".concat(t.map((e=>e.content)).join(",")),"d: ".concat(e?n[0]:null),"m: ".concat(e?r:r+1)];(0,N.ob)({name:"connections",label:"solve-attempt",context:Y(o),moduleName:["b: 4-8-4"],moduleLabel:a})}(r,e,n,C,o);const i=3===C&&!r||A===O-1&&r;i&&function(e,t,n,r){const o=["o: ".concat(e.categories.filter((e=>3!==t||!!e.solved)).sort(((e,t)=>e.solved&&t.solved?e.solved.order-t.solved.order:e.solved?t.solved?0:-1:1)).map((e=>e.level)).join(",")),"m: ".concat(n?t:t+1)];(0,N.ob)({name:"connections",label:"100%-complete",context:Y(r),moduleName:["b: 4-8-4"],moduleLabel:o})}(u,C,r,o),function(e){let{isGameAboutToBeOver:t,board:n,solvedCategoryCount:r,cardsPerCategory:o,correctGuess:a,selectedCards:i,selectedLevels:s}=e;t?(a||In(i),function(e){let{board:t,solvedCategoryCount:n,cardsPerCategory:r,correctGuess:o}=e;const a=t.categories.filter((e=>!e.solved)).sort(tt);let i=[...t.cards];a.forEach(((e,t)=>{const a=n+t,s=i.filter((t=>t.level===e.level));i=at(s,i,e.level,r,!o),i=i.map((t=>t.level===e.level?kn(kn({},t),{},{selected:!0}):kn(kn({},t),{},{selected:!1}))),De({category:e,autoSolved:!o,cards:i.length===r?[]:i,solvedCategoryCount:a}),i=it(i,r)}))}({board:n,solvedCategoryCount:r,cardsPerCategory:o,correctGuess:a})):a?function(e){let{selectedCards:t,board:n,selectedLevels:r,cardsPerCategory:o,solvedCategoryCount:a}=e;const i=at(t,n.cards,r[0],o,!1);De({category:n.categories.find((e=>e.level===r[0])),cards:i.length===o?[]:i,solvedCategoryCount:a,autoSolved:!1})}({selectedCards:i,board:n,selectedLevels:s,cardsPerCategory:o,solvedCategoryCount:r}):In(i)}({isGameAboutToBeOver:i,board:u,solvedCategoryCount:A,cardsPerCategory:E,correctGuess:r,selectedCards:e,selectedLevels:n}),setTimeout((()=>{r?D(n[0],e,t,!1):((e,t,n)=>{y(!0),c((0,Qe.XF)({component:ze.CARD,effect:Fe.CARD_SHAKE,animationTimeout:Ie}));const r=Mn(Mn({},u),{},{guesses:u.guesses.concat([t])});((e,t)=>{const n={};return e.forEach((e=>{let{level:t}=e;const r=n[t];n[t]=void 0!==r?r+1:1})),Object.values(n).includes(t-1)})(e,E)&&!n&&c((0,me.eS)(Me.ONE_AWAY)),setTimeout((()=>{C>=3?(m(Mn(Mn({},u),{},{cards:ct(u.cards),guesses:u.guesses.concat([t])})),c((0,me.eS)(Me.REVEAL_MISTAKE_TITLE)),b(lt(_,O))):m(r),f(!1)}),Ie)})(e,t,i)}),a)},today:o,updateBoard:m})),r.createElement(vn,{disabled:p||g>=0,puzzleSolved:S,resetBoard:()=>{const e=(e=>{const t=e.categories.map((e=>rt(rt({},e),{},{solved:!1}))),n=t.flatMap((e=>e.cards)).sort(((e,t)=>e.originalPosition-t.originalPosition));return{categories:t,guesses:[],cards:n.map((e=>rt(rt({},e),{},{currentPosition:e.originalPosition,selected:!1})))}})(u);m(e),function(e){(e=>{const t=Te(e);Se("playedBefore",!1),Se("history",[]),Se("groupsFound",[]),Se("savedBoard",t)})(e)}(e.categories),f(!1)},autoSolve:()=>{m(Mn(Mn({},u),{},{cards:ct(u.cards)})),b(lt(_,O))}})))},zn=n(6629),Fn="Error-module_errorContent__fSOKJ",Hn="Error-module_errorTitle__ljcWi",Wn="Error-module_errorSubtitle__m9sRl",Kn="Error-module_errorText__sGk_G";const Yn=e=>{let{errorType:t}=e;const n="offline"===t&&"Error-module_offlineErrorIcon__ZJKiw";return r.createElement("span",{role:"img","aria-hidden":!0,className:n||"Error-module_defaultErrorIcon__WqNTT"})},Zn=()=>r.createElement("div",{className:Fn},r.createElement("h1",{className:Hn,"data-testid":"error-header"},"Oh no!"),r.createElement("h2",{className:Wn,"data-testid":"error-subheader"},"Youâ€™re offline."),r.createElement("p",{className:Kn},"Find a connection and come back.")),Vn=()=>r.createElement("div",{className:Fn},r.createElement("h1",{className:Hn,"data-testid":"error-header"},"Oops!"),r.createElement("h2",{className:Wn,"data-testid":"error-subheader"},"Something went wrong."),r.createElement("p",{className:Kn},"Please try again later.")),Xn=()=>r.createElement("div",{className:Fn},r.createElement("h1",{className:Hn,"data-testid":"error-header"},"Oops!"),r.createElement("h2",{className:Wn,"data-testid":"error-subheader"},"Weâ€™re missing data for this puzzle."),r.createElement("p",{className:Kn},"Please test after the data has been added.")),qn=()=>r.createElement("div",{className:Fn},r.createElement("h1",{className:Hn,"data-testid":"error-header"},"Oops!"),r.createElement("h2",{className:Wn,"data-testid":"error-subheader"},"Date precedes the launch date of"," ",(0,zn.Z)(F,"MMM d, yyyy"),"."),r.createElement("p",{className:Kn},"Please test a later puzzle."));function Jn(e){let{errorType:t,showBackButton:n=!1}=e;const o=n||document.referrer.includes("nytimes");if(!t)return null;const a={offline:{icon:r.createElement(Yn,{errorType:"offline"}),content:r.createElement(Zn,null)},default:{icon:r.createElement(Yn,null),content:r.createElement(Vn,null)},missingData:{icon:r.createElement(Yn,null),content:r.createElement(Xn,null)},precedesLaunch:{icon:r.createElement(Yn,null),content:r.createElement(qn,null)}},{icon:i,content:s}=a[t]||a.default,c=S();return r.createElement("div",{className:"Error-module_container__Fx8Rp",style:{backgroundColor:c.ERROR.BACKGROUND,color:c.ERROR.COLOR},role:"dialog"},r.createElement("div",{className:"Error-module_errorContainer___3f4b"},i,s,o&&r.createElement("button",{className:"Error-module_backButton__q290v",style:{backgroundColor:c.BUTTONS.CTA.BACKGROUND,color:c.BUTTONS.CTA.COLOR},type:"button","data-testid":"back",onClick:()=>{(e=>{const t="ios"===window.newsreaderAppPlatform&&!1;if(window.isHybridWebView&&window.NativeBridge)window.NativeBridge.gamesBackToHub();else if(window.isPlayTab||t){const e=document.createElement("a");e.href="nytimes://play",e.click()}else window.location.href="/crosswords"})()}},"Back")))}var Qn=e=>{let{today:t}=e;const n=r.createElement("span",null,Z(t)),a=r.useRef(document.getElementById("portal-game-date"));return a.current?(0,o.createPortal)(n,a.current):n},$n=n(6897),er=n(7234),tr=n(7782),nr=n(2109);function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=n(2738);var ir=()=>{const{userType:e,updateUserType:t,shortzHasLoaded:n}=(0,i.aF)(),c=(0,a.I0)(),l=(0,a.v9)(Kt),d=(0,a.v9)(se);(e=>{const t=t=>{var n;const r=null==t||null===(n=t.detail)||void 0===n?void 0:n.values.gamesAuthenticateUser;(0,p.Af)(r,e)};(0,r.useEffect)((()=>{if(window.isHybridWebView&&window.NativeBridge)return window.addEventListener("gamesUserCredentialChanged",t),()=>{window.removeEventListener("gamesUserCredentialChanged",t)}}),[])})(t);const[b,v]=(0,r.useState)(!1),[y,h]=(0,r.useState)([]),[w,E]=(0,r.useState)(!1),O=r.useRef(document.getElementById("portal-skip-nav")),_=(e=>{var t;let n=new Date;if(!e)return n;if(!window.location.pathname.includes("/puzzles/shortz"))return n;const r=null===(t=window.gameData)||void 0===t?void 0:t.connectionsShortzDate;if(r){const e=(0,tr.Z)(r,"yyyy-MM-dd",new Date);(0,nr.Z)(e)&&(n=new Date("".concat(r,"T12:00:00")))}return n})(e.inShortzMode),S=function(e){try{const t=localStorage.getItem(H),n=JSON.parse(t||"{}"),r=(null==n?void 0:n.groupsFound)||[];return e===n.dayOfTest&&4===r.length}catch(e){return!1}}(Y(_)),P=!(e.isLoggedIn&&!n)&&e.inShortzMode,{errorName:T,isLoading:A,solutionEndpointError:R}=(e=>{let{setPlayedBefore:t,setStoredGuesses:n,shortzControlsOn:r,today:o}=e;const i=(0,a.I0)(),s=(0,a.v9)(Kt),{data:c,isLoading:l,isSuccess:d,isError:u,error:m}=(0,ar.S)((0,zn.Z)(o,"yyyy-MM-dd"),{skip:!!s.id});let p=null;if(u&&m&&(p=((e,t,n,r)=>{if(!e||t)return"default";if(404===(null==n?void 0:n.status)){if((0,$n.Z)(r))return"missingData";if((0,er.Z)(r,F))return"precedesLaunch"}return"default"})(r,l,m,o)),!l&&d){const e=function(e){const t=e.editor||"Wyna Liu",n=e.categories.map(((e,t)=>{const n=t,r=[];return e.cards.forEach((e=>{r.push({level:n,selected:!1,originalPosition:e.position,currentPosition:e.position,content:e.content})})),or(or({},{title:e.title,solved:!1,cards:r,level:n}),{},{found:!1,level:n})}));return or(or({},e),{},{categories:n,editor:t})}(c);try{const{currentGameState:r,currentProgress:o}=Re(e);n(o.guesses),t(o.playedBefore),i((0,Ue.J6)(r))}catch{i((0,Ue.J6)(e));try{Oe(!0),je(!0)}catch(e){console.error(e)}}}return{errorName:p,isLoading:l,solutionEndpointError:m}})({setPlayedBefore:E,setStoredGuesses:h,shortzControlsOn:P,today:_});return(0,r.useEffect)((()=>{oe.load("loading")}),[]),(0,r.useEffect)((()=>{A||oe.transition("loading","welcome")}),[A]),(0,m.Z)((e=>{const t={};d?(c((0,me.Mr)(!0)),t[g.Q5]=!0):t[g.Q5]=!1,e.respondWith(t)}),[d]),(0,f.Z)({analyticsPuzzleID:Y(_).toString(),puzzleID:(null==l?void 0:l.id)||Y(_),game:"connections"}),(0,s.qW)("connectionsAttempts",b),r.createElement(C,null,r.createElement(Qn,{today:_}),r.createElement(re,{contentProps:{isGameFinished:S,editor:A?"Wyna Liu":null==l?void 0:l.editor,today:_,puzzleId:null==l?void 0:l.id,transitionFromWelcomeToGame:()=>{oe.transition("welcome","game").then((()=>v(!0)))},transitionFromAdToGame:()=>{oe.transition("ad","game").then((()=>v(!0)))},transitionFromWelcomeToAd:()=>{oe.transition("welcome","ad")}}}),r.createElement(r.Fragment,null,!A&&!R&&l&&r.createElement(r.Fragment,null,(e=>{if(!O.current)return;const t=e?"pz-game-root":"connections-container";return(0,o.createPortal)(r.createElement(u,{associatedSectionId:t}),O.current)})(b),r.createElement(xn,{categories:l.categories,guesses:y,today:_,isReady:b,playedBefore:w}))||r.createElement(Jn,{showBackButton:!0,errorType:T})))}},9406:function(e,t,n){n.d(t,{NQ:function(){return c},XF:function(){return s},oQ:function(){return l}});var r=n(7281);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const a={isAnimating:!1},i=(0,r.oM)({name:"animation",initialState:a,reducers:{setAnimation(e,t){let{payload:n}=t;return n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isAnimating:!0},n):e},unsetAnimation(){return a}}}),{setAnimation:s,unsetAnimation:c}=i.actions,l=i.reducer},3234:function(e,t,n){n.d(t,{H6:function(){return i},J6:function(){return o},nd:function(){return a}});const r=(0,n(7281).oM)({name:"game",initialState:{puzzle:{print_date:"",id:0,editor:"",categories:[]},attemptsMade:0},reducers:{setPuzzle(e,t){e.puzzle=t.payload},setAttemptsMade(e,t){e.attemptsMade=t.payload}}}),{setPuzzle:o,setAttemptsMade:a}=r.actions,i=r.reducer},8777:function(e,t,n){n.d(t,{h:function(){return m}});var r=n(7670),o=n(7281),a=n(2738),i=n(3234),s=n(2786),c=n(9406);const l=(0,o.e)();l.startListening({actionCreator:c.XF,effect:(e,t)=>{const{animationTimeout:n}=e.payload;setTimeout((()=>{t.dispatch((0,c.NQ)())}),n)}});var d=l;const u=(0,r.UY)({[a.X.reducerPath]:a.X.reducer,animation:c.oQ,game:i.H6,overlays:s.Vj}),m=(0,o.xC)({reducer:u,preloadedState:undefined,middleware:e=>e().concat(a.X.middleware).prepend(d.middleware)})},2786:function(e,t,n){n.d(t,{Mr:function(){return c},RS:function(){return g},Vj:function(){return v},a_:function(){return l},eS:function(){return p},h7:function(){return s},yg:function(){return f}});var r=n(7281),o=n(7670);const a={name:null,isClosing:!1},i=(0,r.oM)({name:"modal",initialState:a,reducers:{openModal(e,t){e.name=t.payload,e.isClosing=!1},closeModal(e,t){e.name=null,e.isClosing=!0},removeModal(e){return a}}}),{openModal:s,closeModal:c,removeModal:l}=i.actions,d=i.reducer,u={name:null,isClosing:!1},m=(0,r.oM)({name:"toast",initialState:u,reducers:{openToast(e,t){e.name=t.payload,e.isClosing=!1},closeToast(e,t){e.name=null,e.isClosing=!0},removeToast(e){return u}}}),{openToast:p,closeToast:f,removeToast:g}=m.actions,b=m.reducer,v=(0,o.UY)({modals:d,toasts:b})},90:function(e,t,n){n.d(t,{Dc:function(){return r},Ds:function(){return o}});const r=e=>new Promise((t=>{setTimeout(t,e)})),o=(e,t)=>{let n;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const i=this;clearTimeout(n),n=setTimeout((()=>e.apply(i,o)),t)}}},5489:function(e,t,n){n.d(t,{$g:function(){return l.$g},Be:function(){return v.B},Mk:function(){return s.Mk},N1:function(){return p.N},OB:function(){return o.OB},T0:function(){return o.T0},Tv:function(){return m.Tv},abra:function(){return f.F},ec:function(){return s.ec},hX:function(){return l.hX},iU:function(){return o.iU},j:function(){return l.j},j0:function(){return o.j0},lY:function(){return m.lY},ob:function(){return l.ob},wC:function(){return i.wC},xD:function(){return s.xD}});var r=n(4395),o=n(2042),a=n(6303),i=n(1069),s=n(3649),c=n(7719),l=n(1586),d=n(8198),u=n(3104),m=n(9936),p=n(7644),f=n(2714),g=n(6756),b=n(9808),v=n(3251);if((0,p.Z)(),(0,l.U9)(),(0,m.ZP)(d.win.sentryConfig),(0,r.Z)(),f.F.init(),d.win.isHybridWebView||"wordle"===d.win.pageName||c.U.initialize(),(0,s.ku)(),(0,i.IX)(),(0,c.q)(),o.G7)d.win.dataLayer=[];else{const e=(0,a.pg)();e||((0,a.I5)(),(0,g.Z)((0,a.Qx)())),d.win.addEventListener("load",(()=>{(0,u.Z)(),e||(0,a.YY)((0,b.Z)(d.win),f.F.getTests()),(0,l.Sv)()}))}},6303:function(e,t,n){n.d(t,{I5:function(){return O},Qx:function(){return _},YY:function(){return C},pg:function(){return w},vv:function(){return S}});var r=n(4658),o=n(4329),a=n(9924),i=n(821),s=n(5873),c=n(2042),l=n(2058),d=n(431),u=n(8198),m=n(9817),p=n(608),f=n(8395),g=n(5899),b=n(6710),v=n(7367);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w=()=>{var e;return window.gamesAppPlatform||window.isMobileDevice&&!["wordle","hub","connections","mini-page","spelling-bee"].includes(window.pageName||"")||"adluce-socrates"===(null===(e=window.purrDirectives)||void 0===e?void 0:e.PURR_AdConfiguration_v3)};u.win.AdSlot4=u.win.AdSlot4||{cmd:[],init:()=>null,events:{subscribe:()=>({remove:()=>{}})},refreshAds:()=>null};const E=u.win.AdSlot4,O=()=>(0,p.Z)(E,(0,c.j0)(),(0,g.Z)()),_=()=>({plat:(0,i.Z)(),prop:(0,s.Z)(),typ:"games",sov:o.Z,vp:(0,a.Z)(r.bf.value)}),C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!u.win.isHybridWebView&&!u.win.nyt_et&&n<10?setTimeout(C,5,e,t,n+1):E.cmd.push((()=>{if(w())return;b._k.forEach((e=>{E.events.subscribe({name:e,scope:"all",callback:(0,v.Y)(e)})}));const n=(0,c.vl)("ad-keywords"),r=l.Z.current,o=h(h(h({},_()),{},{page_view_id:r},n?{adv:n}:{}),{},{abra_dfp:(0,m.Z)(t)});E.init({adTargeting:o,adUnitPath:"".concat("29390238/NYT/crosswords","/").concat(e),sizeMapping:(0,f.ZP)(e,window&&window.innerHeight)}),E.events.subscribe({name:"AdRendered",scope:"all",callback:e=>{let{slot:t,size:n}=e;if(t){const e=u.JU.getElementById(t.getSlotElementId());n&&0===n[1]?e&&(0,d.cn)(e,"fluid"):e&&(0,d.IV)(e,"fluid")}}})}))},S=e=>{var t,n;null===(t=window)||void 0===t||null===(t=t.AdSlot4)||void 0===t||null===(n=t.updateAdReq)||void 0===n||n.call(t,{sub:e})}},3104:function(e,t,n){var r=n(2042),o=n(6023),a=n(3251),i=n(3682);const s="prod"===r.OB.name?"https://purr.nytimes.com":"https://purr.dev.nytimes.com";a.B.get("".concat(s,"/v1/purr-cache")),t.Z=()=>{if(window.ccpa)return;let e;try{e=[...document.querySelectorAll(".ccpa-link")]}catch(e){return}e.forEach((e=>{e.addEventListener("click",i.g),(0,o.Z)(e,i._)})),window.ccpa=!0}},4796:function(e,t,n){n.d(t,{Cb:function(){return i},Og:function(){return o},Ys:function(){return a},mo:function(){return r}});const r=()=>"ios"===window.newsreaderAppPlatform,o=()=>("android"===window.gamesAppPlatform||"android"===window.newsreaderAppPlatform)&&window.isHybridWebView,a=()=>("ios"===window.gamesAppPlatform||r())&&window.isHybridWebView,i=(e,t)=>{if(!e||!t)return!1;const[n,r=0,o=0]=e.split(".").map(Number),[a,i=0,s=0]=t.split(".").map(Number);return n>a||!(n<a)&&(r>i||!(r<i)&&(o>s||!(o<s)))}},9936:function(e,t,n){n.d(t,{lY:function(){return l},ZP:function(){return u},Tv:function(){return d}});var r=n(5225),o=n(2014),a=n(9614),i=n(40),s=n(2272),c=n(2042);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&e.message&&s.$e((n=>{Object.keys(t).forEach((e=>{n.setTag(e,t[e])})),s.Tb(e)}))},d=e=>{let t="anon";e.isLoggedIn&&(t="regi"),e.hasXwd?(t="sub",e.isLoggedIn||(t="anon-sub")):e.isFreeTrial&&(t="free-trial"),s.YA("userType",t),e.regiId&&s.YA("regiId",e.regiId),s.av({id:c.kh||window.btoa(Math.random().toString().substring(2))})};var u=e=>{const{dsn:t,release:n,environment:s,sampleRate:c}=e;c&&r.S({dsn:t,release:n,environment:s,ignoreErrors:a.W,allowUrls:a.a,maxBreadcrumbs:70,sampleRate:c,tracesSampleRate:c,integrations:[o.E8({enableInp:!0}),new i.LF,new i.un,new i.Dz,new i.ce({sampleRate:c,environment:s})]})}},4658:function(e,t,n){n.d(t,{tq:function(){return g},K1:function(){return r},bf:function(){return b}});const r=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||navigator.userAgent||navigator.vendor||(window.opera?"opera":"");return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},o=()=>new URLSearchParams(window.location.search),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("Reader/")||/nyt[-_]?android/i.test(e)},i=function(){return/nyt[-_]?ios/i.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=o(),n=t.get("embed")||"",r=t.get("rid")||"",s=e||navigator.userAgent;return["ios","ipad","iphone"].includes(n)||r||i(s)?"ios":["android","androidtab","androidphone"].includes(n)||a(s)?"android":""},c=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").includes("Crosswords/")},l=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").includes("nyt_xwords_ios/")},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=o(),n=e||navigator.userAgent;return l(n)||"games"===t.get("hybrid")||"games-ios"===t.get("embed")?"ios":c(n)||"games-android"===t.get("embed")?"android":""},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/i(Phone|Pad|Pod)/i.test(e)||l(e)||i(e)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator;return/iPad/.test(e.platform)||"MacIntel"===e.platform&&e.maxTouchPoints>1}()},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/android/i.test(e)||c(e)||a(e)},p=["transitionend","webkitTransitionEnd","oTransitionEnd","msTransitionEnd"].find((e=>"on".concat(e.toLowerCase())in window));function f(e){const t=[],n=document.getElementById(e),r={value:null==n?void 0:n.offsetWidth,subscribe(e){return t.push(e),function(){t.splice(t.indexOf(e),1)}}};return null==n||n.addEventListener(p,(function(){const e=null==n?void 0:n.offsetWidth;var o;if(o=e,r.value=o,!t.length)return;let a=t.length;for(;a>0;)a-=1,t[a](e)}),!1),r}!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")||navigator.userAgent;void 0===e.newsreaderAppPlatform&&(e.newsreaderAppPlatform=s()),void 0===e.gamesAppPlatform&&(e.gamesAppPlatform=d()),void 0===e.isPlayTab&&(e.isPlayTab=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=o(),n=e||navigator.userAgent;return"playTab"===t.get("entry")&&"ios"===s(n)}()),void 0===e.isIOSDevice&&(e.isIOSDevice=u(t)),void 0===e.isAndroidDevice&&(e.isAndroidDevice=m(t)),void 0===e.isMobileDevice&&(e.isMobileDevice=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(e)||u(e)||m(e)}(t)),void 0===e.gamesAppVersion&&(e.gamesAppVersion=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;let n;return"ios"===t?n=e.match(/nyt[-_]?xwords[-_]?ios\/(?:AppVersion\(string: "|.{0})([0-9]+\.[0-9]+(\.[0-9]+)?).*/i):"android"===t&&(n=e.match(/Crosswords\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i)),n&&n.length>=2?n[1]:""}(t,e.gamesAppPlatform)),void 0===e.newsreaderAppVersion&&(e.newsreaderAppVersion=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(/nyt[-_]?ios\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i);return e&&e.length>=2?e[1]:""}(e)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.match(/Reader\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i);if(t&&t.length>=2)return t[1];const n=e.match(/nyt[-_]?android\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i);return n&&n.length>=2?n[1]:""}(e)||""}(t));const n=o();if(void 0===e.isHybridWebView){const n=e.pageName||"";e.isHybridWebView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=o();return e.includes("Reader/")||Boolean(t.get("hybrid"))}(t)||void 0!==e.NYTG&&(e=>!!["connections","wordle","sudoku","tiles","letter-boxed","spelling-bee"].find((t=>e.includes(t))))(n)&&!!d()}"mock"===n.get("bridge")&&(e.isHybridWebView=!0)}(),(()=>{if(!window.isCacheSafe)return;const e=document.querySelector("body"),t=document.querySelector('[name="viewport"]'),n=[];window.isMobileDevice?(n.push("pz-mobile"),window.isIOSDevice&&n.push("pz-mobile-ios"),window.isAndroidDevice&&n.push("pz-mobile-android")):n.push("pz-desktop");const r=!(void 0===window||!window.isHybridWebView),o=!(void 0===window||!window.newsreaderAppPlatform);r&&(n.push("pz-hybrid"),null==t||t.setAttribute("content","width=device-width, initial-scale=1, minimal-ui, maximum-scale=1, user-scalable=no")),window.gamesAppPlatform?(n.push("pz-games-app"),n.push("pz-games-app-".concat(window.gamesAppPlatform))):o?(n.push("pz-newsreader"),n.push("pz-".concat(window.newsreaderAppPlatform)),window.isPlayTab&&n.push("pz-play-tab"),r&&n.push("pz-newsreader-".concat(window.newsreaderAppPlatform,"-hybrid"))):n.push("pz-web"),null==e||e.classList.add(...n)})();const g=document.body.classList.contains("pz-mobile"),b=(f("ratio-hook"),f("width-hook"))},4237:function(e,t,n){n.d(t,{aF:function(){return o.Z},dr:function(){return r.Z}}),n(9526),n(3961),n(5489),n(3373),n(4797),n(9954),n(4265);var r=n(6147),o=n(1687);n(679),n(6653)},679:function(e,t,n){n(9526),n(1687)}}]);
//# sourceMappingURL=2531.9c55e0805d8781823e0d.js.map